<header class="site-header">
  <div class="container">
    <div class="branding">
      <div class="logo-mark">
        <img src="{{ '/imgs/logo-mark-60x120.png' | relative_url }}" alt="Islamic Passport mark" />
      </div>
      <div>
        <a class="site-title" href="{{ '/' | relative_url }}">{{ site.title }}</a>
        <p class="site-subtitle">{{ site.subtitle }}</p>
      </div>
    </div>
    <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-menu">
      <span class="sr-only">Alternar navegação</span>
      <span class="nav-toggle-icon">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>
    <nav class="site-nav" aria-label="Menu principal">
      <ul class="nav-menu" id="primary-menu">
        <li class="nav-item">
          <a class="nav-link" href="{{ '/' | relative_url }}">Início</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ '/' | relative_url }}#noticias">Notícias</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ '/' | relative_url }}#lancamentos">Lançamentos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ '/' | relative_url }}#entidades">Entidades</a>
        </li>
        {% assign menu_pages = site.pages | where_exp: 'page', 'page.menu_header' %}
        {% assign top_level = menu_pages | where_exp: 'page', 'page.submenu_header == nil or page.submenu_header == ""' | sort: 'menu_header' %}
        {% for parent in top_level %}
          {% assign submenu = menu_pages | where: 'submenu_header', parent.menu_header | sort: 'menu_header' %}
          <li class="nav-item{% if submenu.size > 0 %} has-submenu{% endif %}">
            <a class="nav-link" href="{{ parent.url | relative_url }}">{{ parent.menu_header }}</a>
            {% if submenu.size > 0 %}
              <ul class="submenu">
                {% for child in submenu %}
                  <li class="submenu-item">
                    <a class="submenu-link" href="{{ child.url | relative_url }}">{{ child.menu_header }}</a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </nav>
  </div>
</header>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const navToggle = document.querySelector(".nav-toggle");
    const nav = document.querySelector(".site-nav");

    if (!navToggle || !nav) {
      return;
    }

    navToggle.addEventListener("click", function () {
      const isExpanded = navToggle.getAttribute("aria-expanded") === "true";
      navToggle.setAttribute("aria-expanded", String(!isExpanded));
      nav.classList.toggle("is-open", !isExpanded);
    });
  });
</script>
